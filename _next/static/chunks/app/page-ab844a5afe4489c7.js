(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{338:(e,t,s)=>{Promise.resolve().then(s.bind(s,8745))},6534:(e,t,s)=>{"use strict";s.d(t,{I:()=>r,o:()=>o});var i=s(5155),l=s(2115);let a={en:{general:{appTitle:"Joystick Tools",noGamepad:"No gamepad detected",connected:"Connected",notConnected:"Not connected"},controlPanel:{title:"Control Panel",calibration:"Calibration",resetCalibration:"Reset Calibration",testVibration:"Test Vibration",connectionStatus:"Connection Status"},visualization:{title:"Controller Visualization",noGamepadDetected:"No gamepad detected. Connect a controller and press any button."},dataVisualization:{title:"Data Visualization",inputLog:"Input Log",buttonCounter:"Button Counter",axisGraph:"Axis Graph",deviceInfo:"Device Info",clear:"Clear",noInputEvents:"No input events recorded. Press buttons or move sticks to see events.",pressed:"Pressed",released:"Released"},tabs:{visualization:"Visualization",testing:"Testing"},testing:{title:"Testing Modules",latency:"Latency",analog:"Analog",triggers:"Triggers",vibration:"Vibration",wizard:"Wizard",connectGamepad:"Connect a gamepad to use the testing modules"},latencyTest:{title:"Button Response Latency Test",startTest:"Start Test",getReady:"Get ready...",pressButton:"Press this button now!",nextButton:"Get ready for next button...",results:"Results",test:"Test",average:"Average",description:"This test measures how quickly you can respond to on-screen button prompts. Press the indicated button as soon as you see it appear."},analogCalibration:{title:"Analog Stick Calibration",leftStick:"Left Stick",rightStick:"Right Stick",deadZone:"Dead Zone",sensitivity:"Sensitivity",invertAxes:"Invert Axes",invertX:"Invert X-Axis",invertY:"Invert Y-Axis",description:"Move the analog stick to see its position. Adjust the dead zone to eliminate drift when the stick is at rest. Increase sensitivity for more responsive control or decrease it for more precision."},triggerPrecision:{title:"Trigger Precision Test",leftTrigger:"Left Trigger (LT)",rightTrigger:"Right Trigger (RT)",targetValue:"Target Value",currentValue:"Current Value",target:"Target",precisionScore:"Precision Score",pullAndHold:"Pull and hold trigger",description:"This test measures how precisely you can hold a trigger at a specific position. Try to hold the trigger at exactly the target value for the highest precision score."},vibrationTest:{title:"Vibration Test",notSupported:"Vibration not supported",controllerNoSupport:"Your controller does not support vibration or is not connected.",constant:"Constant",pulse:"Pulse",rampUp:"Ramp Up",weakRumble:"Weak Rumble",strongRumble:"Strong Rumble",duration:"Duration",testVibration:"Test Vibration",stop:"Stop",description:"Test your controller's vibration capabilities. Adjust the intensity and duration to find the right feedback for your game. The weak rumble uses high-frequency motors, while the strong rumble uses low-frequency motors."},calibrationWizard:{title:"Calibration Wizard",step:"Step",of:"of",previous:"Previous",next:"Next",startCollecting:"Start Collecting",collectAgain:"Collect Again",finish:"Finish",connectController:"Please connect a controller to use the calibration wizard.",steps:{introduction:{title:"Introduction",description:"This wizard will help you calibrate your controller for optimal performance."},leftStick:{title:"Left Stick",description:"Move the left stick in a full circle, reaching the edges of its range."},rightStick:{title:"Right Stick",description:"Move the right stick in a full circle, reaching the edges of its range."},triggers:{title:"Triggers",description:"Press and release both triggers several times, fully pressing them each time."},complete:{title:"Complete",description:"Calibration complete! Your controller is now optimized for better performance."}}},gamepadType:{xbox:"Xbox Controller",playstation:"PlayStation Controller",generic:"Generic Controller",detected:"Detected:"},language:{english:"English",arabic:"العربية"},direction:"ltr"},ar:{general:{appTitle:"أدوات عصا التحكم",noGamepad:"لم يتم اكتشاف وحدة تحكم",connected:"متصل",notConnected:"غير متصل"},controlPanel:{title:"لوحة التحكم",calibration:"المعايرة",resetCalibration:"إعادة ضبط المعايرة",testVibration:"اختبار الاهتزاز",connectionStatus:"حالة الاتصال"},visualization:{title:"تصور وحدة التحكم",noGamepadDetected:"لم يتم اكتشاف وحدة تحكم. قم بتوصيل وحدة تحكم واضغط على أي زر."},dataVisualization:{title:"تصور البيانات",inputLog:"سجل الإدخال",buttonCounter:"عداد الأزرار",axisGraph:"رسم المحاور",deviceInfo:"معلومات الجهاز",clear:"مسح",noInputEvents:"لم يتم تسجيل أحداث إدخال. اضغط على الأزرار أو حرك العصي لرؤية الأحداث.",pressed:"مضغوط",released:"محرر"},tabs:{visualization:"التصور",testing:"الاختبار"},testing:{title:"وحدات الاختبار",latency:"زمن الاستجابة",analog:"تناظري",triggers:"الزناد",vibration:"الاهتزاز",wizard:"المعالج",connectGamepad:"قم بتوصيل وحدة تحكم لاستخدام وحدات الاختبار"},latencyTest:{title:"اختبار زمن استجابة الزر",startTest:"بدء الاختبار",getReady:"استعد...",pressButton:"اضغط على هذا الزر الآن!",nextButton:"استعد للزر التالي...",results:"النتائج",test:"اختبار",average:"المتوسط",description:"يقيس هذا الاختبار مدى سرعة استجابتك لمطالبات الأزرار على الشاشة. اضغط على الزر المشار إليه بمجرد ظهوره."},analogCalibration:{title:"معايرة العصا التناظرية",leftStick:"العصا اليسرى",rightStick:"العصا اليمنى",deadZone:"المنطقة الميتة",sensitivity:"الحساسية",invertAxes:"عكس المحاور",invertX:"عكس محور X",invertY:"عكس محور Y",description:"حرك العصا التناظرية لرؤية موضعها. اضبط المنطقة الميتة للقضاء على الانجراف عندما تكون العصا في وضع الراحة. زيادة الحساسية للتحكم الأكثر استجابة أو تقليلها لمزيد من الدقة."},triggerPrecision:{title:"اختبار دقة الزناد",leftTrigger:"الزناد الأيسر (LT)",rightTrigger:"الزناد الأيمن (RT)",targetValue:"القيمة المستهدفة",currentValue:"القيمة الحالية",target:"الهدف",precisionScore:"درجة الدقة",pullAndHold:"اسحب وامسك الزناد",description:"يقيس هذا الاختبار مدى دقة إمساكك للزناد في موضع محدد. حاول إمساك الزناد بالضبط عند القيمة المستهدفة للحصول على أعلى درجة دقة."},vibrationTest:{title:"اختبار الاهتزاز",notSupported:"الاهتزاز غير مدعوم",controllerNoSupport:"وحدة التحكم الخاصة بك لا تدعم الاهتزاز أو غير متصلة.",constant:"ثابت",pulse:"نبض",rampUp:"تصاعد",weakRumble:"اهتزاز ضعيف",strongRumble:"اهتزاز قوي",duration:"المدة",testVibration:"اختبار الاهتزاز",stop:"إيقاف",description:"اختبر قدرات الاهتزاز في وحدة التحكم الخاصة بك. اضبط الشدة والمدة للعثور على التغذية الراجعة المناسبة للعبتك. يستخدم الاهتزاز الضعيف محركات عالية التردد، بينما يستخدم الاهتزاز القوي محركات منخفضة التردد."},calibrationWizard:{title:"معالج المعايرة",step:"خطوة",of:"من",previous:"السابق",next:"التالي",startCollecting:"بدء التجميع",collectAgain:"تجميع مرة أخرى",finish:"إنهاء",connectController:"يرجى توصيل وحدة تحكم لاستخدام معالج المعايرة.",steps:{introduction:{title:"مقدمة",description:"سيساعدك هذا المعالج على معايرة وحدة التحكم الخاصة بك للحصول على أداء مثالي."},leftStick:{title:"العصا اليسرى",description:"حرك العصا اليسرى في دائرة كاملة، للوصول إلى حواف نطاقها."},rightStick:{title:"العصا اليمنى",description:"حرك العصا اليمنى في دائرة كاملة، للوصول إلى حواف نطاقها."},triggers:{title:"الزناد",description:"اضغط وحرر كلا الزنادين عدة مرات، مع الضغط عليهما بالكامل في كل مرة."},complete:{title:"اكتمال",description:"اكتملت المعايرة! تم الآن تحسين وحدة التحكم الخاصة بك للحصول على أداء أفضل."}}},gamepadType:{xbox:"وحدة تحكم إكس بوكس",playstation:"وحدة تحكم بلاي ستيشن",generic:"وحدة تحكم عامة",detected:"تم اكتشاف:"},language:{english:"English",arabic:"العربية"},direction:"rtl"}},n=(0,l.createContext)(void 0);function r(e){let{children:t}=e,[s,r]=(0,l.useState)("en"),[o,d]=(0,l.useState)("ltr"),[c,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("language");e&&a[e]&&r(e)},[]),(0,l.useEffect)(()=>{localStorage.setItem("language",s);let e=a[s].direction;d(e),u("rtl"===e),document.documentElement.dir=e,document.documentElement.lang=s,document.documentElement.classList.remove("lang-en","lang-ar"),document.documentElement.classList.add("lang-".concat(s)),"rtl"===e?(document.body.classList.add("rtl-active"),document.body.style.fontFamily="var(--font-noto-sans-arabic), Arial, sans-serif"):(document.body.classList.remove("rtl-active"),document.body.style.fontFamily="var(--font-inter), ui-sans-serif, system-ui, sans-serif")},[s]);let m=a[s];return(0,i.jsx)(n.Provider,{value:{language:s,t:m,setLanguage:r,direction:o,isRTL:c},children:t})}function o(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},8745:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ex});var i=s(5155),l=s(2115);function a(e,t,s,i,l,a){let n=Math.sqrt(e*e+t*t);if(n<s)return[0,0];let r=Math.min(1,(n-s)/(1-s)),o=e/n*r*i,d=t/n*r*i;return l&&(o=-o),a&&(d=-d),[o,d]}var n=s(2596),r=s(9688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,n.$)(t))}let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});d.displayName="Card",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...l})}).displayName="CardHeader",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",s),...l})}).displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...l})}).displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";var u=s(6534);let m={0:{xbox:"A",playstation:"\xd7",generic:"A"},1:{xbox:"B",playstation:"○",generic:"B"},2:{xbox:"X",playstation:"□",generic:"X"},3:{xbox:"Y",playstation:"△",generic:"Y"},4:{xbox:"LB",playstation:"L1",generic:"LB"},5:{xbox:"RB",playstation:"R1",generic:"RB"},6:{xbox:"LT",playstation:"L2",generic:"LT"},7:{xbox:"RT",playstation:"R2",generic:"RT"},8:{xbox:"Back",playstation:"Share",generic:"Select"},9:{xbox:"Start",playstation:"Options",generic:"Start"},10:{xbox:"LS",playstation:"L3",generic:"LS"},11:{xbox:"RS",playstation:"R3",generic:"RS"},12:{xbox:"Up",playstation:"Up",generic:"Up"},13:{xbox:"Down",playstation:"Down",generic:"Down"},14:{xbox:"Left",playstation:"Left",generic:"Left"},15:{xbox:"Right",playstation:"Right",generic:"Right"},16:{xbox:"Guide",playstation:"PS",generic:"Home"}},f=(0,l.createContext)(void 0);function x(e){let{children:t,gamepadState:s}=e,[a,n]=(0,l.useState)("generic");return(0,l.useEffect)(()=>{s.connected?n(function(e){let t=e.toLowerCase();return t.includes("xbox")||t.includes("microsoft")?"xbox":t.includes("playstation")||t.includes("sony")||t.includes("dualshock")||t.includes("dualsense")?"playstation":"generic"}(s.id)):n("generic")},[s.connected,s.id]),(0,i.jsx)(f.Provider,{value:{controllerType:a,getButtonName:e=>(function(e,t){let s=m[e];return s?s[t]:"Button ".concat(e)})(e,a)},children:t})}function h(){let e=(0,l.useContext)(f);if(void 0===e)throw Error("useGamepadType must be used within a GamepadTypeProvider");return e}function g(e){let{gamepadState:t,calibrationData:s}=e,n=(0,l.useRef)(null),{t:r,isRTL:o}=(0,u.o)(),{controllerType:m}=h();return(0,l.useEffect)(()=>{let e=n.current;if(!e)return;let i=e.getContext("2d");i&&(i.clearRect(0,0,e.width,e.height),o&&(i.save(),i.translate(e.width,0),i.scale(-1,1)),"playstation"===m?function(e,t,s){var i,l,n,r,o,d,c,u,m,f,x,h,g,p,v,b,y;let{width:j,height:N}=e.canvas,S=Math.min(j/600,N/400);e.save(),e.translate(j/2-400*S/2,N/2-280*S/2),e.beginPath(),e.moveTo(100*S,70*S),e.bezierCurveTo(50*S,70*S,20*S,120*S,20*S,145*S),e.lineTo(20*S,195*S),e.bezierCurveTo(20*S,220*S,50*S,270*S,100*S,270*S),e.lineTo(300*S,270*S),e.bezierCurveTo(350*S,270*S,380*S,220*S,380*S,195*S),e.lineTo(380*S,145*S),e.bezierCurveTo(380*S,120*S,350*S,70*S,300*S,70*S),e.closePath(),e.fillStyle=t.connected?"#303030":"#666",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let k=100*S,T=140*S,w=15*S;e.beginPath(),e.arc(k,T,w+10*S,0,2*Math.PI),e.fillStyle="#222",e.fill(),e.beginPath(),e.moveTo(k,T-w),e.lineTo(k-w,T-w),e.lineTo(k-w,T-2*w),e.lineTo(k+w,T-2*w),e.lineTo(k+w,T-w),e.lineTo(k,T-w),e.fillStyle=t.connected&&(null===(i=t.buttons[12])||void 0===i?void 0:i.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(k+w,T),e.lineTo(k+w,T-w),e.lineTo(k+2*w,T-w),e.lineTo(k+2*w,T+w),e.lineTo(k+w,T+w),e.lineTo(k+w,T),e.fillStyle=t.connected&&(null===(l=t.buttons[15])||void 0===l?void 0:l.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(k,T+w),e.lineTo(k-w,T+w),e.lineTo(k-w,T+2*w),e.lineTo(k+w,T+2*w),e.lineTo(k+w,T+w),e.lineTo(k,T+w),e.fillStyle=t.connected&&(null===(n=t.buttons[13])||void 0===n?void 0:n.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(k-w,T),e.lineTo(k-w,T-w),e.lineTo(k-2*w,T-w),e.lineTo(k-2*w,T+w),e.lineTo(k-w,T+w),e.lineTo(k-w,T),e.fillStyle=t.connected&&(null===(r=t.buttons[14])||void 0===r?void 0:r.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke();let P=100*S,C=210*S,M=20*S,R=M+5*S;if(e.beginPath(),e.arc(P,C,R,0,2*Math.PI),e.fillStyle="#222",e.fill(),t.connected){let[i,l]=a(t.axes[0],t.axes[1],s.deadZones.leftStick,s.sensitivity.leftStick,s.invert.leftStickX,s.invert.leftStickY);e.beginPath(),e.arc(P+i*M,C+l*M,M,0,2*Math.PI),e.fillStyle=(null===(p=t.buttons[10])||void 0===p?void 0:p.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke()}else e.beginPath(),e.arc(P,C,M,0,2*Math.PI),e.fillStyle="#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let A=300*S,I=250*S;if(e.beginPath(),e.arc(A,I,R,0,2*Math.PI),e.fillStyle="#222",e.fill(),t.connected){let[i,l]=a(t.axes[2],t.axes[3],s.deadZones.rightStick,s.sensitivity.rightStick,s.invert.rightStickX,s.invert.rightStickY);e.beginPath(),e.arc(A+i*M,I+l*M,M,0,2*Math.PI),e.fillStyle=(null===(v=t.buttons[11])||void 0===v?void 0:v.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke()}else e.beginPath(),e.arc(A,I,M,0,2*Math.PI),e.fillStyle="#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let L=15*S,z=300*S,W=140*S,V=30*S;e.beginPath(),e.arc(z,W+V,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(o=t.buttons[0])||void 0===o?void 0:o.pressed)?"#3b82f6":"#5c9ade",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.moveTo(z-8*S,W+V-8*S),e.lineTo(z+8*S,W+V+8*S),e.moveTo(z+8*S,W+V-8*S),e.lineTo(z-8*S,W+V+8*S),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(z+V,W,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(d=t.buttons[1])||void 0===d?void 0:d.pressed)?"#3b82f6":"#e94444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(z+V,W,8*S,0,2*Math.PI),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(z-V,W,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(c=t.buttons[2])||void 0===c?void 0:c.pressed)?"#3b82f6":"#9c44e9",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.rect(z-V-7*S,W-7*S,14*S,14*S),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(z,W-V,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(u=t.buttons[3])||void 0===u?void 0:u.pressed)?"#3b82f6":"#4fe944",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.moveTo(z,W-V-7*S),e.lineTo(z+8*S,W-V+5*S),e.lineTo(z-8*S,W-V+5*S),e.closePath(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let E=60*S,D=20*S,Z=40*S,B=25*S,Y=40*S,G=15*S;if(e.beginPath(),e.rect(50*S,Y,E,D),e.fillStyle=t.connected&&(null===(m=t.buttons[4])||void 0===m?void 0:m.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.font="".concat(10*S,"px Arial"),e.textAlign="center",e.textBaseline="middle",e.fillText("L1",(50+E/2)*S,Y+D/2),e.beginPath(),e.rect(290*S,Y,E,D),e.fillStyle=t.connected&&(null===(f=t.buttons[5])||void 0===f?void 0:f.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("R1",(290+E/2)*S,Y+D/2),e.beginPath(),e.rect(60*S,G,Z,B),t.connected){let i=(null===(b=t.buttons[6])||void 0===b?void 0:b.value)||0,l=i;l=i>s.deadZones.triggers?(i-s.deadZones.triggers)/(1-s.deadZones.triggers)*s.sensitivity.triggers:0;let a=e.createLinearGradient(60*S,G,(60+Z)*S,G);a.addColorStop(0,"#444"),a.addColorStop(l,"#3b82f6"),a.addColorStop(l,"#444"),a.addColorStop(1,"#444"),e.fillStyle=a}else e.fillStyle="#444";if(e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("L2",(60+Z/2)*S,G+B/2),e.beginPath(),e.rect(300*S,G,Z,B),t.connected){let i=(null===(y=t.buttons[7])||void 0===y?void 0:y.value)||0,l=i;l=i>s.deadZones.triggers?(i-s.deadZones.triggers)/(1-s.deadZones.triggers)*s.sensitivity.triggers:0;let a=e.createLinearGradient(300*S,G,(300+Z)*S,G);a.addColorStop(0,"#444"),a.addColorStop(l,"#3b82f6"),a.addColorStop(l,"#444"),a.addColorStop(1,"#444"),e.fillStyle=a}else e.fillStyle="#444";e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("R2",(300+Z/2)*S,G+B/2);let X=25*S,F=15*S,_=140*S,U=15*S;e.beginPath(),e.ellipse(200*S-U-X/2,_,X/2,F/2,0,0,2*Math.PI),e.fillStyle=t.connected&&(null===(x=t.buttons[8])||void 0===x?void 0:x.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.font="".concat(6*S,"px Arial"),e.fillText("SHARE",200*S-U-X/2,_),e.beginPath(),e.ellipse(200*S+U+X/2,_,X/2,F/2,0,0,2*Math.PI),e.fillStyle=t.connected&&(null===(h=t.buttons[9])||void 0===h?void 0:h.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillText("OPTIONS",200*S+U+X/2,_),e.beginPath(),e.arc(200*S,_+35*S,15*S,0,2*Math.PI),e.fillStyle=t.connected&&(null===(g=t.buttons[16])||void 0===g?void 0:g.pressed)?"#3b82f6":"#444",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.font="".concat(10*S,"px Arial"),e.fillText("PS",200*S,_+35*S),e.restore()}(i,t,s):function(e,t,s){var i,l,n,r,o,d,c,u,m,f,x,h,g,p,v,b,y;let{width:j,height:N}=e.canvas,S=Math.min(j/600,N/400);e.save(),e.translate(j/2-400*S/2,N/2-280*S/2),e.beginPath(),e.moveTo(100*S,70*S),e.bezierCurveTo(50*S,70*S,20*S,120*S,20*S,145*S),e.lineTo(20*S,195*S),e.bezierCurveTo(20*S,220*S,50*S,270*S,100*S,270*S),e.lineTo(300*S,270*S),e.bezierCurveTo(350*S,270*S,380*S,220*S,380*S,195*S),e.lineTo(380*S,145*S),e.bezierCurveTo(380*S,120*S,350*S,70*S,300*S,70*S),e.closePath(),e.fillStyle=t.connected?"#333":"#666",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let k=100*S,T=140*S,w=20*S,P=w+5*S;if(e.beginPath(),e.arc(k,T,P,0,2*Math.PI),e.fillStyle="#222",e.fill(),t.connected){let[i,l]=a(t.axes[0],t.axes[1],s.deadZones.leftStick,s.sensitivity.leftStick,s.invert.leftStickX,s.invert.leftStickY);e.beginPath(),e.arc(k+i*w,T+l*w,w,0,2*Math.PI),e.fillStyle=(null===(p=t.buttons[10])||void 0===p?void 0:p.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke()}else e.beginPath(),e.arc(k,T,w,0,2*Math.PI),e.fillStyle="#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let C=300*S,M=220*S;if(e.beginPath(),e.arc(C,M,P,0,2*Math.PI),e.fillStyle="#222",e.fill(),t.connected){let[i,l]=a(t.axes[2],t.axes[3],s.deadZones.rightStick,s.sensitivity.rightStick,s.invert.rightStickX,s.invert.rightStickY);e.beginPath(),e.arc(C+i*w,M+l*w,w,0,2*Math.PI),e.fillStyle=(null===(v=t.buttons[11])||void 0===v?void 0:v.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke()}else e.beginPath(),e.arc(C,M,w,0,2*Math.PI),e.fillStyle="#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke();let R=100*S,A=210*S,I=15*S;e.beginPath(),e.arc(R,A,I+10*S,0,2*Math.PI),e.fillStyle="#222",e.fill(),e.beginPath(),e.moveTo(R,A-I),e.lineTo(R-I,A-I),e.lineTo(R-I,A-2*I),e.lineTo(R+I,A-2*I),e.lineTo(R+I,A-I),e.lineTo(R,A-I),e.fillStyle=t.connected&&(null===(i=t.buttons[12])||void 0===i?void 0:i.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(R+I,A),e.lineTo(R+I,A-I),e.lineTo(R+2*I,A-I),e.lineTo(R+2*I,A+I),e.lineTo(R+I,A+I),e.lineTo(R+I,A),e.fillStyle=t.connected&&(null===(l=t.buttons[15])||void 0===l?void 0:l.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(R,A+I),e.lineTo(R-I,A+I),e.lineTo(R-I,A+2*I),e.lineTo(R+I,A+2*I),e.lineTo(R+I,A+I),e.lineTo(R,A+I),e.fillStyle=t.connected&&(null===(n=t.buttons[13])||void 0===n?void 0:n.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke(),e.beginPath(),e.moveTo(R-I,A),e.lineTo(R-I,A-I),e.lineTo(R-2*I,A-I),e.lineTo(R-2*I,A+I),e.lineTo(R-I,A+I),e.lineTo(R-I,A),e.fillStyle=t.connected&&(null===(r=t.buttons[14])||void 0===r?void 0:r.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=+S,e.stroke();let L=15*S,z=300*S,W=140*S,V=30*S;e.beginPath(),e.arc(z,W+V,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(o=t.buttons[0])||void 0===o?void 0:o.pressed)?"#3b82f6":"#0f0",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#111",e.font="".concat(12*S,"px Arial"),e.textAlign="center",e.textBaseline="middle",e.fillText("A",z,W+V),e.beginPath(),e.arc(z+V,W,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(d=t.buttons[1])||void 0===d?void 0:d.pressed)?"#3b82f6":"#f00",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#111",e.fillText("B",z+V,W),e.beginPath(),e.arc(z-V,W,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(c=t.buttons[2])||void 0===c?void 0:c.pressed)?"#3b82f6":"#00f",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("X",z-V,W),e.beginPath(),e.arc(z,W-V,L,0,2*Math.PI),e.fillStyle=t.connected&&(null===(u=t.buttons[3])||void 0===u?void 0:u.pressed)?"#3b82f6":"#ff0",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#111",e.fillText("Y",z,W-V);let E=60*S,D=20*S,Z=40*S,B=25*S,Y=40*S,G=15*S;if(e.beginPath(),e.rect(50*S,Y,E,D),e.fillStyle=t.connected&&(null===(m=t.buttons[4])||void 0===m?void 0:m.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.font="".concat(10*S,"px Arial"),e.textAlign="center",e.textBaseline="middle",e.fillText("LB",(50+E/2)*S,Y+D/2),e.beginPath(),e.rect(290*S,Y,E,D),e.fillStyle=t.connected&&(null===(f=t.buttons[5])||void 0===f?void 0:f.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("RB",(290+E/2)*S,Y+D/2),e.beginPath(),e.rect(60*S,G,Z,B),t.connected){let i=(null===(b=t.buttons[6])||void 0===b?void 0:b.value)||0,l=i;l=i>s.deadZones.triggers?(i-s.deadZones.triggers)/(1-s.deadZones.triggers)*s.sensitivity.triggers:0;let a=e.createLinearGradient(60*S,G,(60+Z)*S,G);a.addColorStop(0,"#555"),a.addColorStop(l,"#3b82f6"),a.addColorStop(l,"#555"),a.addColorStop(1,"#555"),e.fillStyle=a}else e.fillStyle="#555";if(e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("LT",(60+Z/2)*S,G+B/2),e.beginPath(),e.rect(300*S,G,Z,B),t.connected){let i=(null===(y=t.buttons[7])||void 0===y?void 0:y.value)||0,l=i;l=i>s.deadZones.triggers?(i-s.deadZones.triggers)/(1-s.deadZones.triggers)*s.sensitivity.triggers:0;let a=e.createLinearGradient(300*S,G,(300+Z)*S,G);a.addColorStop(0,"#555"),a.addColorStop(l,"#3b82f6"),a.addColorStop(l,"#555"),a.addColorStop(1,"#555"),e.fillStyle=a}else e.fillStyle="#555";e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.fillStyle="#fff",e.fillText("RT",(300+Z/2)*S,G+B/2);let X=30*S,F=15*S,_=140*S,U=12*S;e.beginPath(),e.ellipse(200*S-U-X/2,_,X/2,F/2,0,0,2*Math.PI),e.fillStyle=t.connected&&(null===(x=t.buttons[8])||void 0===x?void 0:x.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.ellipse(200*S+U+X/2,_,X/2,F/2,0,0,2*Math.PI),e.fillStyle=t.connected&&(null===(h=t.buttons[9])||void 0===h?void 0:h.pressed)?"#3b82f6":"#555",e.fill(),e.strokeStyle="#222",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(200*S,_,15*S,0,2*Math.PI),e.fillStyle=t.connected&&(null===(g=t.buttons[16])||void 0===g?void 0:g.pressed)?"#3b82f6":"#222",e.fill(),e.strokeStyle="#111",e.lineWidth=2*S,e.stroke(),e.beginPath(),e.arc(200*S,_,10*S,0,2*Math.PI),e.fillStyle="#0f0",e.fill(),e.strokeStyle="#111",e.lineWidth=+S,e.stroke(),e.restore()}(i,t,s),o&&i.restore())},[t,s,m,o]),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:r.visualization.title}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("canvas",{ref:n,width:600,height:400,className:"border border-border rounded-md bg-card ".concat(o?"rtl-canvas":"")})}),!t.connected&&(0,i.jsx)("div",{className:"mt-4 text-center text-muted-foreground",children:r.visualization.noGamepadDetected})]})})}var p=s(9708),v=s(2085);let b=(0,v.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=l.forwardRef((e,t)=>{let{className:s,variant:l,size:a,asChild:n=!1,...r}=e,d=n?p.DX:"button";return(0,i.jsx)(d,{className:o(b({variant:l,size:a,className:s})),ref:t,...r})});y.displayName="Button";var j=s(704);let N=j.bL,S=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(j.B8,{ref:t,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});S.displayName=j.B8.displayName;let k=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(j.l9,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});k.displayName=j.l9.displayName;let T=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(j.UC,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});T.displayName=j.UC.displayName;var w=s(7631),P=s(235),C=s(133),M=s(9735);function R(e){let{activeTab:t,setActiveTab:s,gamepadState:l,calibrationData:a,setCalibrationData:n}=e,{t:r,direction:o,isRTL:m}=(0,u.o)();return(0,i.jsx)(d,{className:"h-full",children:(0,i.jsxs)(c,{className:"p-4 space-y-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold",children:r.controlPanel.title}),(0,i.jsx)(N,{value:t,onValueChange:s,className:"w-full",children:(0,i.jsxs)(S,{className:"w-full",children:[(0,i.jsx)(k,{value:"visualization",className:"flex-1",children:(0,i.jsxs)("div",{className:"flex items-center ".concat(m?"flex-row-reverse":"flex-row"),children:[(0,i.jsx)(w.A,{className:"h-4 w-4 ".concat("mr-2")}),(0,i.jsx)("span",{children:r.tabs.visualization})]})}),(0,i.jsx)(k,{value:"testing",className:"flex-1",children:(0,i.jsxs)("div",{className:"flex items-center ".concat(m?"flex-row-reverse":"flex-row"),children:[(0,i.jsx)(P.A,{className:"h-4 w-4 ".concat("mr-2")}),(0,i.jsx)("span",{children:r.tabs.testing})]})})]})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:r.controlPanel.calibration}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(y,{variant:"outline",size:"sm",onClick:()=>{n({deadZones:{leftStick:.1,rightStick:.1,triggers:.05},sensitivity:{leftStick:1,rightStick:1,triggers:1},invert:{leftStickX:!1,leftStickY:!1,rightStickX:!1,rightStickY:!1}})},children:(0,i.jsxs)("div",{className:"flex items-center ".concat(m?"flex-row-reverse":"flex-row"),children:[(0,i.jsx)(C.A,{className:"h-3.5 w-3.5 ".concat(m?"mr-0 ml-2":"ml-0 mr-2")}),(0,i.jsx)("span",{children:r.controlPanel.resetCalibration})]})}),l.vibrationActuator&&(0,i.jsx)(y,{variant:"outline",size:"sm",onClick:()=>{l.vibrationActuator&&l.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:200,weakMagnitude:.5,strongMagnitude:.5})},children:(0,i.jsxs)("div",{className:"flex items-center ".concat(m?"flex-row-reverse":"flex-row"),children:[(0,i.jsx)(M.A,{className:"h-3.5 w-3.5 ".concat(m?"mr-0 ml-2":"ml-0 mr-2")}),(0,i.jsx)("span",{children:r.controlPanel.testVibration})]})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:r.controlPanel.connectionStatus}),(0,i.jsx)("div",{className:"text-sm p-2 rounded bg-muted",children:l.connected?(0,i.jsxs)("div",{className:"flex flex-col ".concat(m?"items-end text-right":"items-start text-left"),children:[(0,i.jsx)("span",{className:"text-green-500 font-medium",children:r.general.connected}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:l.id}),(0,i.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Index: ",l.index]}),(0,i.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Mapping: ",l.mapping]})]}):(0,i.jsx)("span",{className:"text-red-500",children:r.general.noGamepad})})]})]})]})})}var A=s(2098),I=s(3509);function L(e){let{gamepadState:t,theme:s,toggleTheme:l}=e,{t:a}=(0,u.o)(),{controllerType:n}=h();return(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-card rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"flex items-center space-x-2",children:t.connected?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{className:"h-5 w-5 text-green-500"}),(0,i.jsxs)("span",{className:"font-medium",children:[a.general.connected,": "]}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:t.id})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{className:"h-5 w-5 text-red-500"}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:a.general.noGamepad})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[t.connected&&(0,i.jsxs)("div",{className:"px-2 py-1 bg-muted rounded text-sm mr-2",children:[(0,i.jsxs)("span",{className:"font-medium",children:[a.gamepadType.detected," "]}),(0,i.jsx)("span",{className:"text-muted-foreground",children:"xbox"===n?a.gamepadType.xbox:"playstation"===n?a.gamepadType.playstation:a.gamepadType.generic})]}),(0,i.jsx)(y,{variant:"ghost",size:"icon",onClick:l,children:"dark"===s?(0,i.jsx)(A.A,{className:"h-5 w-5"}):(0,i.jsx)(I.A,{className:"h-5 w-5"})})]})]})}var z=s(5863);let W=l.forwardRef((e,t)=>{let{className:s,value:l,...a}=e;return(0,i.jsx)(z.bL,{ref:t,className:o("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:(0,i.jsx)(z.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});function V(e){let{gamepadState:t}=e,{t:s,direction:a}=(0,u.o)(),{getButtonName:n}=h(),[r,o]=(0,l.useState)(!1),[m,f]=(0,l.useState)(null),[x,g]=(0,l.useState)([]),[p,v]=(0,l.useState)(3),[b,j]=(0,l.useState)(null),[N,S]=(0,l.useState)(null),k=(0,l.useRef)(null),T=(0,l.useRef)([]);(0,l.useEffect)(()=>{t.connected&&(T.current=t.buttons.map(e=>e.pressed))},[t]);let w=()=>{f(Math.floor(4*Math.random())),j(performance.now()),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{r&&null!==m&&P()},3e3)};(0,l.useEffect)(()=>{var e;if(r&&null!==m&&null!==b&&t.connected&&(null===(e=t.buttons[m])||void 0===e?void 0:e.pressed)&&!T.current[m]){let e=performance.now()-b;S(e),g(t=>[...t,e]),k.current&&clearTimeout(k.current),setTimeout(P,1500)}},[t,r,m,b]);let P=()=>{f(null),x.length>=4?o(!1):setTimeout(w,1e3)},C=x.length>0?x.reduce((e,t)=>e+t,0)/x.length:null;return(0,l.useEffect)(()=>()=>{k.current&&clearTimeout(k.current)},[]),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center ".concat("rtl"===a?"flex-row-reverse":""),children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:s.latencyTest.title}),!r&&(0,i.jsx)(y,{onClick:()=>{o(!0),g([]),v(3),f(null),j(null),S(null);let e=setInterval(()=>{v(t=>t<=1?(clearInterval(e),w(),0):t-1)},1e3)},disabled:!t.connected,children:s.latencyTest.startTest})]}),r&&p>0&&(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-6 flex flex-col items-center justify-center",children:[(0,i.jsx)("div",{className:"text-4xl font-bold",children:p}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground mt-2",children:s.latencyTest.getReady})]})}),r&&0===p&&(0,i.jsx)(d,{children:(0,i.jsx)(c,{className:"p-6 flex flex-col items-center justify-center",children:null!==m?(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl font-bold mb-4",children:n(m)}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:s.latencyTest.pressButton})]}):(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-xl font-medium mb-2",children:s.latencyTest.nextButton}),(0,i.jsx)(W,{value:100,className:"w-64"})]})})}),x.length>0&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h4",{className:"text-sm font-medium",children:s.latencyTest.results}),(0,i.jsxs)("div",{className:"grid grid-cols-5 gap-2 ".concat("rtl"===a?"flex flex-row-reverse":""),children:[x.map((e,t)=>(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-3 text-center",children:[(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[s.latencyTest.test," ",t+1]}),(0,i.jsxs)("div",{className:"text-lg font-medium",children:[Math.round(e),"ms"]})]})},t)),null!==C&&(0,i.jsx)(d,{className:"bg-primary/10",children:(0,i.jsxs)(c,{className:"p-3 text-center",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:s.latencyTest.average}),(0,i.jsxs)("div",{className:"text-lg font-medium",children:[Math.round(C),"ms"]})]})})]})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:s.latencyTest.description})]})}W.displayName=z.bL.displayName;var E=s(4073);let D=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsxs)(E.bL,{ref:t,className:o("relative flex w-full touch-none select-none items-center",s),...l,children:[(0,i.jsx)(E.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,i.jsx)(E.Q6,{className:"absolute h-full bg-primary"})}),(0,i.jsx)(E.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});D.displayName=E.bL.displayName;var Z=s(4884);let B=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(Z.bL,{className:o("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:t,children:(0,i.jsx)(Z.zi,{className:o("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});B.displayName=Z.bL.displayName;var Y=s(968);let G=(0,v.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(Y.b,{ref:t,className:o(G(),s),...l})});function F(e){let{gamepadState:t,calibrationData:s,setCalibrationData:a}=e,[n,r]=(0,l.useState)("left"),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=o.current;if(!e)return;let i=e.getContext("2d");if(!i)return;let l=e.width,a=e.height,r=l/2,d=a/2,c=Math.min(l,a)/3;i.clearRect(0,0,l,a),i.beginPath(),i.arc(r,d,c,0,2*Math.PI),i.strokeStyle="#888",i.lineWidth=2,i.stroke();let u="left"===n?s.deadZones.leftStick:s.deadZones.rightStick;if(i.beginPath(),i.arc(r,d,c*u,0,2*Math.PI),i.fillStyle="rgba(200, 200, 200, 0.2)",i.fill(),i.beginPath(),i.moveTo(r-c,d),i.lineTo(r+c,d),i.moveTo(r,d-c),i.lineTo(r,d+c),i.strokeStyle="#888",i.lineWidth=1,i.stroke(),t.connected){let e,l;"left"===n?(e=t.axes[0],l=t.axes[1]):(e=t.axes[2],l=t.axes[3]),"left"===n?(s.invert.leftStickX&&(e=-e),s.invert.leftStickY&&(l=-l)):(s.invert.rightStickX&&(e=-e),s.invert.rightStickY&&(l=-l));let a="left"===n?s.sensitivity.leftStick:s.sensitivity.rightStick;e*=a,l*=a;let o=r+(e=Math.max(-1,Math.min(1,e)))*c,u=d+(l=Math.max(-1,Math.min(1,l)))*c;i.beginPath(),i.arc(o,u,10,0,2*Math.PI),i.fillStyle="#3b82f6",i.fill(),i.strokeStyle="#1d4ed8",i.lineWidth=2,i.stroke()}},[t,s,n]);let u=e=>{a({...s,invert:{...s.invert,["".concat(n,"Stick").concat(e)]:!s.invert["".concat(n,"Stick").concat(e)]}})};return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Analog Stick Calibration"})}),(0,i.jsx)(N,{value:n,onValueChange:r,className:"w-full",children:(0,i.jsxs)(S,{className:"grid grid-cols-2 mb-4",children:[(0,i.jsx)(k,{value:"left",children:"Left Stick"}),(0,i.jsx)(k,{value:"right",children:"Right Stick"})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)(d,{children:(0,i.jsx)(c,{className:"p-4 flex justify-center",children:(0,i.jsx)("canvas",{ref:o,width:200,height:200,className:"border border-border rounded-md bg-card"})})}),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4 space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(X,{children:"Dead Zone"}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:("left"===n?s.deadZones.leftStick:s.deadZones.rightStick).toFixed(2)})]}),(0,i.jsx)(D,{value:["left"===n?s.deadZones.leftStick:s.deadZones.rightStick],min:0,max:.5,step:.01,onValueChange:e=>{a({...s,deadZones:{...s.deadZones,["left"===n?"leftStick":"rightStick"]:e[0]}})}})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(X,{children:"Sensitivity"}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:("left"===n?s.sensitivity.leftStick:s.sensitivity.rightStick).toFixed(2)})]}),(0,i.jsx)(D,{value:["left"===n?s.sensitivity.leftStick:s.sensitivity.rightStick],min:.5,max:2,step:.05,onValueChange:e=>{a({...s,sensitivity:{...s.sensitivity,["left"===n?"leftStick":"rightStick"]:e[0]}})}})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(X,{children:"Invert Axes"}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(B,{checked:"left"===n?s.invert.leftStickX:s.invert.rightStickX,onCheckedChange:()=>u("X")}),(0,i.jsx)(X,{children:"Invert X-Axis"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(B,{checked:"left"===n?s.invert.leftStickY:s.invert.rightStickY,onCheckedChange:()=>u("Y")}),(0,i.jsx)(X,{children:"Invert Y-Axis"})]})]})]})]})})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Move the analog stick to see its position. Adjust the dead zone to eliminate drift when the stick is at rest. Increase sensitivity for more responsive control or decrease it for more precision."})]})}function _(e){var t,s;let{gamepadState:a,calibrationData:n}=e,[r,o]=(0,l.useState)("left"),[u,m]=(0,l.useState)(.5),[f,x]=(0,l.useState)([]),h="left"===r?(null===(t=a.buttons[6])||void 0===t?void 0:t.value)||0:(null===(s=a.buttons[7])||void 0===s?void 0:s.value)||0;(0,l.useEffect)(()=>{a.connected&&x(e=>{let t=[...e,h];return t.length>30?t.slice(t.length-30):t})},[a,h]);let g=(()=>{if(f.length<5)return null;let e=f.slice(-5);return Math.round(Math.max(0,100-200*Math.abs(e.reduce((e,t)=>e+t,0)/e.length-u)))})();return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Trigger Precision Test"})}),(0,i.jsx)(N,{value:r,onValueChange:o,className:"w-full",children:(0,i.jsxs)(S,{className:"grid grid-cols-2 mb-4",children:[(0,i.jsx)(k,{value:"left",children:"Left Trigger (LT)"}),(0,i.jsx)(k,{value:"right",children:"Right Trigger (RT)"})]})}),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4 space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-sm",children:"Target Value"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*u),"%"]})]}),(0,i.jsx)(D,{value:[u],min:.1,max:.9,step:.05,onValueChange:e=>m(e[0])})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-sm",children:"Current Value"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*h),"%"]})]}),(0,i.jsx)(W,{value:100*h,className:"h-8"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-sm",children:"Target"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*u),"%"]})]}),(0,i.jsxs)("div",{className:"relative h-8 bg-muted rounded-md overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-0 bottom-0 bg-primary/30 border-l-2 border-r-2 border-primary",style:{left:"".concat(Math.max(0,(u-.05)*100),"%"),right:"".concat(Math.max(0,100-(u+.05)*100),"%")}}),(0,i.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-primary",style:{left:"".concat(100*u,"%")}})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-sm",children:"Precision Score"}),(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:null!==g?"".concat(g,"%"):"Pull and hold trigger"})]}),(0,i.jsxs)("div",{className:"h-8 rounded-md overflow-hidden bg-muted flex items-center justify-center",children:[null!==g&&(0,i.jsx)("div",{className:"h-full ".concat(null===g?"bg-muted":g>=90?"bg-green-500":g>=70?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(g,"%")}}),null!==g&&(0,i.jsxs)("span",{className:"absolute text-sm font-medium",children:[g,"%"]})]})]})]})}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"This test measures how precisely you can hold a trigger at a specific position. Try to hold the trigger at exactly the target value for the highest precision score."})]})}function U(e){let{gamepadState:t}=e,[s,a]=(0,l.useState)(.5),[n,r]=(0,l.useState)(.5),[o,u]=(0,l.useState)(500),[m,f]=(0,l.useState)("constant"),x=t.connected&&t.vibrationActuator;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Vibration Test"})}),!x&&(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-6 text-center",children:[(0,i.jsx)("div",{className:"text-lg font-medium text-red-500",children:"Vibration not supported"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Your controller does not support vibration or is not connected."})]})}),x&&(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4 space-y-6",children:[(0,i.jsx)(N,{value:m,onValueChange:f,className:"w-full",children:(0,i.jsxs)(S,{className:"grid grid-cols-3 mb-4",children:[(0,i.jsx)(k,{value:"constant",children:"Constant"}),(0,i.jsx)(k,{value:"pulse",children:"Pulse"}),(0,i.jsx)(k,{value:"ramp",children:"Ramp Up"})]})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(X,{children:"Weak Rumble"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*s),"%"]})]}),(0,i.jsx)(D,{value:[s],min:0,max:1,step:.05,onValueChange:e=>a(e[0])})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(X,{children:"Strong Rumble"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(100*n),"%"]})]}),(0,i.jsx)(D,{value:[n],min:0,max:1,step:.05,onValueChange:e=>r(e[0])})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(X,{children:"Duration"}),(0,i.jsxs)("span",{className:"text-sm text-muted-foreground",children:[o,"ms"]})]}),(0,i.jsx)(D,{value:[o],min:100,max:2e3,step:100,onValueChange:e=>u(e[0])})]})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(y,{onClick:()=>{if(x){if("constant"===m)t.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:o,weakMagnitude:s,strongMagnitude:n});else if("pulse"===m){let e=o/3;for(let i=0;i<3;i++)setTimeout(()=>{t.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:.5*e,weakMagnitude:s,strongMagnitude:n})},i*e)}else if("ramp"===m){let e=o/10;for(let i=0;i<10;i++){let l=i/9;setTimeout(()=>{t.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:e,weakMagnitude:s*l,strongMagnitude:n*l})},i*e)}}}},className:"flex-1",children:"Test Vibration"}),(0,i.jsx)(y,{variant:"outline",onClick:()=>{x&&t.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:0,weakMagnitude:0,strongMagnitude:0})},children:"Stop"})]})]})}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Test your controller's vibration capabilities. Adjust the intensity and duration to find the right feedback for your game. The weak rumble uses high-frequency motors, while the strong rumble uses low-frequency motors."})]})}function q(e){let{gamepadState:t,calibrationData:s,setCalibrationData:a}=e,[n,r]=(0,l.useState)(0),[o,u]=(0,l.useState)(!1),[m,f]=(0,l.useState)(0),[x,h]=(0,l.useState)([]),[g,p]=(0,l.useState)([]),[v,b]=(0,l.useState)([]),j=(0,l.useRef)(null),N=(0,l.useRef)(null),S=[{title:"Introduction",description:"This wizard will help you calibrate your controller for optimal performance."},{title:"Left Stick",description:"Move the left stick in a full circle, reaching the edges of its range."},{title:"Right Stick",description:"Move the right stick in a full circle, reaching the edges of its range."},{title:"Triggers",description:"Press and release both triggers several times, fully pressing them each time."},{title:"Complete",description:"Calibration complete! Your controller is now optimized for better performance."}];(0,l.useEffect)(()=>{if(o){let e=setInterval(()=>{f(t=>{let s=t+2;return s>=100?(clearInterval(e),100):s})},100);return()=>clearInterval(e)}},[o]),(0,l.useEffect)(()=>{if(!o||!t.connected)return;let e=setInterval(()=>{1===n?h(e=>[...e,[t.axes[0],t.axes[1]]]):2===n?p(e=>[...e,[t.axes[2],t.axes[3]]]):3===n&&b(e=>[...e,[t.buttons[6].value,t.buttons[7].value]])},100);return()=>clearInterval(e)},[o,n,t]);let k=()=>{if(u(!1),f(100),N.current&&(clearTimeout(N.current),N.current=null),1===n&&x.length>0){let e=Math.max(.05,Math.min(.3,.8*Math.min(...x.map(e=>{let[t,s]=e;return Math.sqrt(t*t+s*s)}).filter(e=>e>0))));a({...s,deadZones:{...s.deadZones,leftStick:e}})}else if(2===n&&g.length>0){let e=Math.max(.05,Math.min(.3,.8*Math.min(...g.map(e=>{let[t,s]=e;return Math.sqrt(t*t+s*s)}).filter(e=>e>0))));a({...s,deadZones:{...s.deadZones,rightStick:e}})}else if(3===n&&v.length>0){let e=Math.max(.05,Math.min(.2,.8*Math.min(...v.flat().filter(e=>e>0))));a({...s,deadZones:{...s.deadZones,triggers:e}})}};return(0,l.useEffect)(()=>{let e=j.current;if(!e)return;let s=e.getContext("2d");if(!s)return;let i=e.width,l=e.height,a=i/2,r=l/2,o=Math.min(i,l)/3;if(s.clearRect(0,0,i,l),1===n||2===n){s.beginPath(),s.arc(a,r,o,0,2*Math.PI),s.strokeStyle="#888",s.lineWidth=2,s.stroke(),s.beginPath(),s.moveTo(a-o,r),s.lineTo(a+o,r),s.moveTo(a,r-o),s.lineTo(a,r+o),s.strokeStyle="#888",s.lineWidth=1,s.stroke();let e=1===n?x:g;if(e.length>0&&(s.beginPath(),e.forEach((e,t)=>{let[i,l]=e,n=a+i*o,d=r+l*o;0===t?s.moveTo(n,d):s.lineTo(n,d)}),s.strokeStyle="#3b82f6",s.lineWidth=2,s.stroke()),t.connected){let e,i;1===n?(e=t.axes[0],i=t.axes[1]):(e=t.axes[2],i=t.axes[3]);let l=a+e*o,d=r+i*o;s.beginPath(),s.arc(l,d,8,0,2*Math.PI),s.fillStyle="#3b82f6",s.fill()}}else if(3===n){let e=i/3,a=.6*l,n=i/4-e/2,r=3*i/4-e/2,o=l/2-a/2;if(s.fillStyle="#f0f0f0",s.fillRect(n,o,e,a),s.fillStyle="#f0f0f0",s.fillRect(r,o,e,a),t.connected){let i=t.buttons[6].value,l=t.buttons[7].value;s.fillStyle="#3b82f6",s.fillRect(n,o+a*(1-i),e,a*i),s.fillStyle="#3b82f6",s.fillRect(r,o+a*(1-l),e,a*l),s.fillStyle="#000",s.font="14px sans-serif",s.textAlign="center",s.fillText("LT",n+e/2,o+a+20),s.fillText("RT",r+e/2,o+a+20),s.fillText("".concat(Math.round(100*i),"%"),n+e/2,o-10),s.fillText("".concat(Math.round(100*l),"%"),r+e/2,o-10)}}},[n,t,x,g,v]),(0,l.useEffect)(()=>()=>{N.current&&clearTimeout(N.current)},[]),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Calibration Wizard"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Step ",n+1," of ",S.length]})]}),(0,i.jsx)(W,{value:n/(S.length-1)*100,className:"h-2"}),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-6",children:[(0,i.jsx)("h4",{className:"text-xl font-medium mb-2",children:S[n].title}),(0,i.jsx)("p",{className:"text-muted-foreground mb-4",children:S[n].description}),n>0&&n<4&&(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("canvas",{ref:j,width:300,height:200,className:"border border-border rounded-md bg-card mx-auto"}),o&&(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{children:"Collecting data..."}),(0,i.jsxs)("span",{children:[m,"%"]})]}),(0,i.jsx)(W,{value:m,className:"h-2"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)(y,{variant:"outline",onClick:()=>{r(e=>Math.max(e-1,0))},disabled:0===n,children:"Previous"}),n>0&&n<4&&!o&&(0,i.jsx)(y,{onClick:()=>{u(!0),f(0),1===n&&h([]),2===n&&p([]),3===n&&b([]),N.current=setTimeout(()=>{k()},5e3)},disabled:!t.connected,children:0===m?"Start Collecting":"Collect Again"}),(0,i.jsx)(y,{onClick:()=>{r(e=>Math.min(e+1,S.length-1))},disabled:n>0&&n<4&&m<100||n===S.length-1,children:n===S.length-1?"Finish":"Next"})]})]})}),!t.connected&&(0,i.jsx)("div",{className:"text-center text-red-500 text-sm",children:"Please connect a controller to use the calibration wizard."})]})}function O(e){let{gamepadState:t,calibrationData:s,setCalibrationData:a}=e,[n,r]=(0,l.useState)("latency"),{t:o,direction:m}=(0,u.o)();return(0,l.useEffect)(()=>{t.connected&&localStorage.setItem("gamepad-calibration-".concat(t.id),JSON.stringify(s))},[s,t]),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:o.testing.title}),(0,i.jsxs)("div",{className:"flex mb-4 overflow-x-auto pb-2 ".concat("rtl"===m?"flex-row-reverse":""),children:[(0,i.jsx)("button",{onClick:()=>r("latency"),className:"px-4 py-2 rounded-md mx-2 whitespace-nowrap ".concat("latency"===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:o.testing.latency}),(0,i.jsx)("button",{onClick:()=>r("analog"),className:"px-4 py-2 rounded-md mx-2 whitespace-nowrap ".concat("analog"===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:o.testing.analog}),(0,i.jsx)("button",{onClick:()=>r("trigger"),className:"px-4 py-2 rounded-md mx-2 whitespace-nowrap ".concat("trigger"===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:o.testing.triggers}),(0,i.jsx)("button",{onClick:()=>r("vibration"),className:"px-4 py-2 rounded-md mx-2 whitespace-nowrap ".concat("vibration"===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:o.testing.vibration}),(0,i.jsx)("button",{onClick:()=>r("calibration"),className:"px-4 py-2 rounded-md mx-2 whitespace-nowrap ".concat("calibration"===n?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:o.testing.wizard})]}),(0,i.jsx)("div",{className:"rounded-md p-4 bg-muted/50",children:t.connected?(0,i.jsxs)(i.Fragment,{children:["latency"===n&&(0,i.jsx)(V,{gamepadState:t}),"analog"===n&&(0,i.jsx)(F,{gamepadState:t,calibrationData:s,setCalibrationData:a}),"trigger"===n&&(0,i.jsx)(_,{gamepadState:t,calibrationData:s}),"vibration"===n&&(0,i.jsx)(U,{gamepadState:t}),"calibration"===n&&(0,i.jsx)(q,{gamepadState:t,calibrationData:s,setCalibrationData:a})]}):(0,i.jsx)("div",{className:"text-center py-10",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:o.testing.connectGamepad})})})]})})}X.displayName=Y.b.displayName;var H=s(7655);let J=l.forwardRef((e,t)=>{let{className:s,children:l,...a}=e;return(0,i.jsxs)(H.bL,{ref:t,className:o("relative overflow-hidden",s),...a,children:[(0,i.jsx)(H.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,i.jsx)(Q,{}),(0,i.jsx)(H.OK,{})]})});J.displayName=H.bL.displayName;let Q=l.forwardRef((e,t)=>{let{className:s,orientation:l="vertical",...a}=e;return(0,i.jsx)(H.VM,{ref:t,orientation:l,className:o("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:(0,i.jsx)(H.lr,{className:"relative flex-1 rounded-full bg-border"})})});function K(e){let{gamepadState:t}=e,{t:s,direction:a}=(0,u.o)(),{getButtonName:n}=h(),[r,o]=(0,l.useState)([]),m=(0,l.useRef)([]),f=(0,l.useRef)([]),x=(0,l.useRef)(0),g=["Left Stick X","Left Stick Y","Right Stick X","Right Stick Y"];(0,l.useEffect)(()=>{if(!t.connected)return;let e=[];t.buttons.forEach((t,s)=>{let i=m.current[s]||!1;t.pressed!==i&&e.push({id:"btn-".concat(x.current++),timestamp:Date.now(),type:"button",index:s,value:t.pressed,label:n(s)})}),m.current=t.buttons.map(e=>e.pressed),t.axes.forEach((t,s)=>{Math.abs(t-(f.current[s]||0))>.05&&e.push({id:"axis-".concat(x.current++),timestamp:Date.now(),type:"axis",index:s,value:t,label:g[s]||"Axis ".concat(s)})}),f.current=[...t.axes],e.length>0&&o(t=>[...e,...t].slice(0,50))},[t,n]);let p=e=>{let t=new Date(e);return"".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"),".").concat(t.getMilliseconds().toString().padStart(3,"0"))};return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center ".concat("rtl"===a?"flex-row-reverse":""),children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:s.dataVisualization.inputLog}),(0,i.jsx)("button",{className:"text-xs text-muted-foreground hover:text-foreground",onClick:()=>o([]),children:s.dataVisualization.clear})]}),(0,i.jsx)(d,{children:(0,i.jsx)(c,{className:"p-0",children:(0,i.jsx)(J,{className:"h-[300px] w-full",children:0===r.length?(0,i.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:s.dataVisualization.noInputEvents}):(0,i.jsx)("div",{className:"divide-y divide-border",children:r.map(e=>(0,i.jsxs)("div",{className:"p-2 text-sm flex items-center ".concat("rtl"===a?"flex-row-reverse":""),children:[(0,i.jsx)("div",{className:"w-32 text-xs text-muted-foreground",children:p(e.timestamp)}),(0,i.jsx)("div",{className:"w-24 font-medium",children:e.label}),(0,i.jsx)("div",{className:"flex-1",children:"button"===e.type?(0,i.jsx)("span",{className:e.value?"text-green-500":"text-red-500",children:e.value?s.dataVisualization.pressed:s.dataVisualization.released}):(0,i.jsx)("span",{children:"number"==typeof e.value?e.value.toFixed(2):e.value})})]},e.id))})})})})]})}function $(e){let{gamepadState:t}=e,[s,a]=(0,l.useState)([]),n=(0,l.useRef)([]),r=["A","B","X","Y","LB","RB","LT","RT","Back","Start","LS","RS","Up","Down","Left","Right","Guide"];(0,l.useEffect)(()=>{a(r.map(e=>({label:e,count:0,lastPressed:null})))},[]),(0,l.useEffect)(()=>{if(!t.connected)return;let e=Date.now();t.buttons.forEach((t,s)=>{if(s>=r.length)return;let i=n.current[s]||!1;t.pressed&&!i&&a(t=>{let i=[...t];return i[s]&&(i[s]={...i[s],count:i[s].count+1,lastPressed:e}),i})}),n.current=t.buttons.map(e=>e.pressed)},[t]);let o=Math.max(...s.map(e=>e.count),1);return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:"Button Press Counter"}),(0,i.jsx)("button",{className:"text-xs text-muted-foreground hover:text-foreground",onClick:()=>{a(e=>e.map(e=>({...e,count:0,lastPressed:null})))},children:"Reset"})]}),(0,i.jsx)(d,{children:(0,i.jsx)(c,{className:"p-4",children:(0,i.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{children:e.label}),(0,i.jsx)("span",{className:"text-muted-foreground",children:e.count})]}),(0,i.jsx)(W,{value:e.count/o*100,className:"h-2"})]},t))})})})]})}function ee(e){let{gamepadState:t,calibrationData:s}=e,[a,n]=(0,l.useState)([0,0,0,0]),r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t.connected&&n([...t.axes])},[t]),(0,l.useEffect)(()=>{let e=r.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let s=e.width,i=e.height,l=s/2,n=i/2,o=Math.min(s,i)/3;t.clearRect(0,0,s,i),t.beginPath(),t.moveTo(l,0),t.lineTo(l,i),t.moveTo(0,n),t.lineTo(s,n),t.strokeStyle="#888",t.lineWidth=1,t.stroke();let d=s/5;a.forEach((e,s)=>{let l=e*o+n,a=d*(s+.5);t.fillStyle="#3b82f6",t.fillRect(a-d/4,n,d/2,-(l-n)),t.fillStyle="#000",t.font="12px sans-serif",t.textAlign="center",t.fillText("Axis ".concat(s),a,i-10)})},[a]),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:"Axis Value Graph"}),(0,i.jsx)(d,{children:(0,i.jsx)(c,{className:"p-4",children:(0,i.jsx)("canvas",{ref:r,width:400,height:200,className:"border border-border rounded-md bg-card"})})})]})}function et(e){let{gamepadState:t}=e;return t.connected?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Device Information"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Device ID"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.id})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Index"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.index})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Mapping"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.mapping})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Connected"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Yes"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Buttons"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.buttons.length})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Axes"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.axes.length})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Vibration"}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:t.vibrationActuator?"Supported":"Not supported"})]})]})]})}),(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Raw Input Values"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Buttons"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:t.buttons.map((e,t)=>(0,i.jsxs)("div",{className:"text-sm p-2 border rounded-md",children:[(0,i.jsxs)("div",{className:"font-medium",children:["Button ",t]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Pressed: ",e.pressed?"Yes":"No"]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Value: ",e.value.toFixed(2)]})]},t))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Axes"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:t.axes.map((e,t)=>(0,i.jsxs)("div",{className:"text-sm p-2 border rounded-md",children:[(0,i.jsxs)("div",{className:"font-medium",children:["Axis ",t]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Value: ",e.toFixed(4)]})]},t))})]})]})]})})]}):(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-6 text-center",children:[(0,i.jsx)("div",{className:"text-lg font-medium text-muted-foreground",children:"No gamepad connected"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Connect a gamepad to view device information"})]})})}function es(e){let{gamepadState:t,calibrationData:s}=e,[a,n]=(0,l.useState)("input-log"),{t:r,isRTL:o}=(0,u.o)();return(0,i.jsx)(d,{children:(0,i.jsxs)(c,{className:"p-4",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:r.dataVisualization.title}),(0,i.jsxs)(N,{value:a,onValueChange:n,className:"w-full",children:[(0,i.jsxs)(S,{className:"grid grid-cols-4 mb-4 ".concat(o?"rtl-direction":""),children:[(0,i.jsx)(k,{value:"input-log",className:o?"order-0":"",children:r.dataVisualization.inputLog}),(0,i.jsx)(k,{value:"button-counter",className:o?"order-1":"",children:r.dataVisualization.buttonCounter}),(0,i.jsx)(k,{value:"axis-graph",className:o?"order-2":"",children:r.dataVisualization.axisGraph}),(0,i.jsx)(k,{value:"device-info",className:o?"order-3":"",children:r.dataVisualization.deviceInfo})]}),(0,i.jsx)(T,{value:"input-log",className:o?"text-right":"",children:(0,i.jsx)(K,{gamepadState:t})}),(0,i.jsx)(T,{value:"button-counter",className:o?"text-right":"",children:(0,i.jsx)($,{gamepadState:t})}),(0,i.jsx)(T,{value:"axis-graph",className:o?"text-right":"",children:(0,i.jsx)(ee,{gamepadState:t,calibrationData:s})}),(0,i.jsx)(T,{value:"device-info",className:o?"text-right":"",children:(0,i.jsx)(et,{gamepadState:t})})]})]})})}Q.displayName=H.VM.displayName;let ei={deadZones:{leftStick:.1,rightStick:.1,triggers:.05},sensitivity:{leftStick:1,rightStick:1,triggers:1},invert:{leftStickX:!1,leftStickY:!1,rightStickX:!1,rightStickY:!1}};var el=s(7835),ea=s(8102),en=s(3052),er=s(5196),eo=s(9428);let ed=ea.bL,ec=ea.l9;ea.YJ,ea.ZL,ea.Pb,ea.z6,l.forwardRef((e,t)=>{let{className:s,inset:l,children:a,...n}=e;return(0,i.jsxs)(ea.ZP,{ref:t,className:o("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",s),...n,children:[a,(0,i.jsx)(en.A,{className:"ml-auto"})]})}).displayName=ea.ZP.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(ea.G5,{ref:t,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})}).displayName=ea.G5.displayName;let eu=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...a}=e;return(0,i.jsx)(ea.ZL,{children:(0,i.jsx)(ea.UC,{ref:t,sideOffset:l,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})})});eu.displayName=ea.UC.displayName;let em=l.forwardRef((e,t)=>{let{className:s,inset:l,...a}=e;return(0,i.jsx)(ea.q7,{ref:t,className:o("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",s),...a})});function ef(){let{language:e,setLanguage:t,t:s}=(0,u.o)(),l=e=>{t(e)};return(0,i.jsxs)(ed,{children:[(0,i.jsx)(ec,{asChild:!0,children:(0,i.jsxs)(y,{variant:"outline",size:"icon",children:[(0,i.jsx)(el.A,{className:"h-[1.2rem] w-[1.2rem]"}),(0,i.jsx)("span",{className:"sr-only",children:"Toggle language"})]})}),(0,i.jsxs)(eu,{align:"end",children:[(0,i.jsx)(em,{onClick:()=>l("en"),className:"en"===e?"bg-accent":"",children:s.language.english}),(0,i.jsx)(em,{onClick:()=>l("ar"),className:"ar"===e?"bg-accent":"",children:s.language.arabic})]})]})}function ex(){let{gamepadState:e,calibrationData:t,setCalibrationData:s}=function(){let[e,t]=(0,l.useState)({}),[s,i]=(0,l.useState)(ei),a=(0,l.useRef)(null);(0,l.useEffect)(()=>(window.addEventListener("gamepadconnected",n),window.addEventListener("gamepaddisconnected",r),a.current=requestAnimationFrame(o),()=>{window.removeEventListener("gamepadconnected",n),window.removeEventListener("gamepaddisconnected",r),a.current&&cancelAnimationFrame(a.current)}),[]);let n=e=>{let{gamepad:s}=e;t(e=>({...e,[s.index]:{connected:!0,id:s.id,index:s.index,timestamp:s.timestamp,buttons:s.buttons.map(e=>({pressed:e.pressed,touched:e.touched,value:e.value})),axes:[...s.axes],mapping:s.mapping,vibrationActuator:s.vibrationActuator}}))},r=e=>{let{gamepad:s}=e;t(e=>{let t={...e};return delete t[s.index],t})},o=()=>{for(let e of navigator.getGamepads())e&&t(t=>({...t,[e.index]:{connected:!0,id:e.id,index:e.index,timestamp:e.timestamp,buttons:e.buttons.map(e=>({pressed:e.pressed,touched:e.touched,value:e.value})),axes:[...e.axes],mapping:e.mapping,vibrationActuator:e.vibrationActuator}}));a.current=requestAnimationFrame(o)};return{gamepadState:Object.values(e)[0]||{connected:!1,id:Math.random().toString(36).substring(2,15),index:-1,timestamp:0,buttons:Array(20).fill({pressed:!1,touched:!1,value:0}),axes:[,,,,].fill(0),mapping:"standard",vibrationActuator:null},calibrationData:s,setCalibrationData:i}}(),{theme:a,toggleTheme:n}=function(){let[e,t]=(0,l.useState)("light");return(0,l.useEffect)(()=>{let e="light";{let s=localStorage.getItem("theme");s?e=s:window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),t(e)}},[]),(0,l.useEffect)(()=>{{let t=window.document.documentElement;t.classList.remove("light","dark"),t.classList.add(e),localStorage.setItem("theme",e)}},[e]),{theme:e,toggleTheme:()=>{t(e=>"dark"===e?"light":"dark")}}}(),[r,o]=(0,l.useState)("visualization"),{t:d,direction:c,isRTL:m}=(0,u.o)();return(0,i.jsx)(x,{gamepadState:e,children:(0,i.jsx)("main",{className:"min-h-screen p-4 md:p-8 bg-background text-foreground ".concat(m?"rtl":"ltr"),children:(0,i.jsxs)("div",{className:"container mx-auto space-y-6",children:[(0,i.jsxs)("div",{className:"flex ".concat(m?"flex-row-reverse":"flex-row"," justify-between items-center"),children:[(0,i.jsx)(L,{gamepadState:e,theme:a,toggleTheme:n}),(0,i.jsx)(ef,{})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 ".concat(m?"lg:rtl-grid":""),children:[(0,i.jsx)("div",{className:"lg:col-span-1 ".concat(m?"lg:order-last":""),children:(0,i.jsx)(R,{activeTab:r,setActiveTab:o,gamepadState:e,calibrationData:t,setCalibrationData:s})}),(0,i.jsxs)("div",{className:"lg:col-span-2 ".concat(m?"lg:order-first":""),children:["visualization"===r&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)(g,{gamepadState:e,calibrationData:t}),(0,i.jsx)(es,{gamepadState:e,calibrationData:t})]}),"testing"===r&&(0,i.jsx)(O,{gamepadState:e,calibrationData:t,setCalibrationData:s})]})]})]})})})}em.displayName=ea.q7.displayName,l.forwardRef((e,t)=>{let{className:s,children:l,checked:a,...n}=e;return(0,i.jsxs)(ea.H_,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...n,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(ea.VF,{children:(0,i.jsx)(er.A,{className:"h-4 w-4"})})}),l]})}).displayName=ea.H_.displayName,l.forwardRef((e,t)=>{let{className:s,children:l,...a}=e;return(0,i.jsxs)(ea.hN,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(ea.VF,{children:(0,i.jsx)(eo.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=ea.hN.displayName,l.forwardRef((e,t)=>{let{className:s,inset:l,...a}=e;return(0,i.jsx)(ea.JU,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...a})}).displayName=ea.JU.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,i.jsx)(ea.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=ea.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[29,441,684,358],()=>t(338)),_N_E=e.O()}]);